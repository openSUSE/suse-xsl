// our own bubble-toc thing generates an <ol>, DocBook's default make.lots
// generates an <ul> because ... no reason, page contents obviously are not
// ordered. Anyway, seems we're stuck with both.

$you-are-here-weight: 700

.side-toc

  > ol,
  > ul
    // some bottom margin to account for floating browser status bars etc.
    padding: 0 0 2rem 0

  ol,
  ul
    margin: 0
    display: block
    font-size: $i_font_side_toc

  a
    color: $c_pine
    display: block
    line-height: 22px
    padding: 0.25rem .5rem
    position: relative
    text-decoration: none

    &.you-are-here
      font-weight: $you-are-here-weight

  a:focus,
  a:hover,
  a:active
    background-color: $c_fog_200
    text-decoration: underline

  .side-title
    color: $c_pine
    font-size: $i_font_menu
    font-weight: 800


#_side-toc-page
  .toc
    padding-bottom: .3rem
    border-bottom: 1px solid $c_fog_300


#_side-toc-overall

  ol

    ol
      background-color: scale-color($c_fog, $lightness: +25%)
      margin-bottom: 0
      // FIXME suse22: the max-height:0 overflow:hidden thing allows animating this,
      // but is it ok to use it? or do we need display:none actually?
      max-height: 0
      overflow: hidden
      transition: max-height 0.3s ease-in-out, margin-bottom 0.2s ease-in-out

    > li.active

      > ol
        max-height: 1000px
        margin-bottom: .3rem

  li
    display: block

    > a.has-children
      padding-right: 1.75rem
      position: relative

      &.current
        font-weight: $you-are-here-weight

      &::after
        content: ''
        display: block
        position: absolute
        right: .4rem
        top: .4rem
        height: 1rem
        text-align: center
        width: 1rem
        font-weight: 800
        border: .2rem solid $c_white
        border-radius: 50%
        background-color: $c_white
        background-repeat: no-repeat
        // FIXME suse22: base64'd SVG chevron from fontawesome https://css-tricks.com/probably-dont-base64-svg/
        background-image: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0NDggNTEyIiBjbGFzcz0id2VpZ2h0ZWQgcmlnaHQiPjwhLS0gRm9udCBBd2Vzb21lIEZyZWUgNS4xNS4zIGJ5IEBmb250YXdlc29tZSwgaHR0cHM6Ly9mb250YXdlc29tZS5jb20gLSBDQyBCWSA0LjAgLS0+PHBhdGggZD0iTTIwNy4wMjkgMzgxLjQ3NkwxMi42ODYgMTg3LjEzMmMtOS4zNzMtOS4zNzMtOS4zNzMtMjQuNTY5IDAtMzMuOTQxbDIyLjY2Ny0yMi42NjdjOS4zNTctOS4zNTcgMjQuNTIyLTkuMzc1IDMzLjkwMS0uMDRMMjI0IDI4NC41MDVsMTU0Ljc0NS0xNTQuMDIxYzkuMzc5LTkuMzM1IDI0LjU0NC05LjMxNyAzMy45MDEuMDRsMjIuNjY3IDIyLjY2N2M5LjM3MyA5LjM3MyA5LjM3MyAyNC41NjkgMCAzMy45NDFMMjQwLjk3MSAzODEuNDc2Yy05LjM3MyA5LjM3Mi0yNC41NjkgOS4zNzItMzMuOTQyIDB6Ii8+PC9zdmc+Cg==')
        background-position: .05rem .04rem
        rotate: -90deg
        transition: rotate 0.2s linear


    &.active > a.has-children::after
      rotate: 0.01deg
      background-position: .04rem .05rem

  ol > li.active > a
    background-color: $c_jungle
    color: $c_white

    ol li > a
      padding-left: 1rem
